# Обновленное тестовое задание для стажёра  iOS-направления (зимняя волна 2025)

# Общие правила/подсказки:

- Иконки можно выбирать на своё усмотрение, однако лучше всего использовать иконки из SF Symbols  
- Используйте этот [API](https://fakeapi.platzi.com/)

*Обратите внимание, что сущности в базе данных могут быть удалены другими пользователями или в результате тестирования. Если вы столкнулись с отсутствием данных, вы можете самостоятельно добавить новые сущности через API. Для этого используйте соответствующий метод, чтобы создать необходимые данные для ваших тестов. Это позволит вам продолжить работу и проверить функциональность даже в случае отсутствия данных в базе.*

## Несколько рекомендаций по использованию API тестового задания.
### Рекомендация 1
Мы подготовили отдельный хост, который крутится, с копией сервера для тестового задания - 165.227.238.45:3001. Для запросов можно использовать его. Лучше не использовать запросы для добавления/удаления продуктов/категории. Пути для ручек остаются теми же.

В случае, если в вашем приложении не выходит получить данные с хоста с ошибкой "The resource could not be loaded because the App Transport Security policy requires the use of a secure connection.", то воспользуйтесь [статьей от Apple](https://developer.apple.com/news/?id=jxky8h89)

В случае, если хост не работает, сообщите об этом на почту internships@avito.ru
### Рекомендация 2
Сервер можно раскатить локально на собственном ноутбуке. Это может быть посложнее, но точно будет работать и можно спокойно добавлять/удалять что хочется

**1. Скачать репозиторий Platzi Fake API**
Склонировать [репозиторий](https://github.com/PlatziLabs/fake-api-backend/tree/master)

**2. Установить npm**
Локально были проблемы с более новой версией node, может помочь если поставить node версии 20.x
Что надо выполнить в терминале:
1. `curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.5/install.sh | bash`
2. `source ~/.zshrc` или `source ~/.bashrc`
3. `nvm install 20`
4. Проверить командой `node -v` и увидеть, что мажорная версия 20я

**3. Настроить конфигурационный файл и установить зависимости**
1. Открыть файл `src/config/config.ts`
2. Выставить явно port (3000 будет нормально) и выставить `accessSecretKey`, `refreshSecretKey`, `recoverySecretKey` как произвольные строки
3. Вызвать из корня склоненного репозитория `npm install`

**4. Запустить проект**
`npm run start` или `npm run start:prod` (иногда перед второй командой нужно хотя бы один раз запустить и грохнуть первую)

**5. Подергать ручки**
Например, можно вот так
```
curl 127.0.0.1:3001/api/v1/products | jq
```

# Суть задания:

# 1 экран — Поисковый, выдача
Экран должен содержать:
- Список товаров с постраничной загрузкой (выдача)  
- Ячейки айтемов с картинкой  
- Поиск по тексту  
- Фильтры прямо на экране выдачи

## Помимо этого необходимо:
- Реализовать список товаров с постраничной загрузкой (выдача)   
- Сделать отображение выдачи в виде плитки: по 2 товара в одном ряду  
- Реализовать ячейки айтемов с картинкой  
- Показывать пользователю empty-state, если ничего не удалось найти, и empty-state с возможностью перезапроса, если произошла ошибка при загрузке  
- Реализовать поиск по тексту  
- Реализовать фильтры прямо на экране выдачи. *Пример можно посмотреть в приложении Авито. Как это работает? При нажатии на фильтр внизу расположен Bottom Sheet с данными для настройки. Нужно поддержать все 4 фильтра из описания API, а также иметь возможность применять сразу несколько*   
- Сохранять 5 последних поисковых запросов (как минимум, текстовых)

## Необязательно (будет плюсом при выполнении):
1) В зависимости от категории айтема, отображать его в общей выдаче по-разному. *Например, для категорий 1 и 2 (одежда и электроника) делать ячейку, которая будет отображаться во всю ширину экрана. Допустимы и другие варианты, главное — чтобы ячейки и их размеры были разными.*  
2) Реализовать более умную механику сохранения 5 последних поисковых запросов, при которой запоминается не только текст, но и выбранные фильтры. *В идеале — понимать, что нужно сохранять не все выборы в поиске, а те, результаты которых пользователь пролистывал.*  
3) Возможность сохранять настройки поиска (текст и выбранные фильтры) и использовать их при следующих запусках приложения

# 2 экран — Карточка товара
Экран отображает детальную информацию о товаре:
- Изображение (любое из доступных)  
- Заголовок  
- Описание  
- Цена  
- Категория

## Помимо этого необходимо:
- При ошибке загрузки картинки сохранять общий вид макета и отобразить изображение-placeholder  
- Предоставить возможность поделиться информацией о товаре (только текст) с использованием системных средств  
- Иметь возможность вернуться назад к экрану поиска

## Необязательно (будет плюсом при выполнении):
1) Добавить возможность просматривать *все* доступные изображения товара в виде галереи на том же экране.
2) Продвинутая реализация может предполагать возможность просмотра изображений в полноэкранной галерее.

Экран должен содержать кнопку добавления товара в «Список покупок»:
- Если товар ранее не был добавлен в список, то при нажатии на кнопку его необходимо добавить, а заголовок кнопки заменить на «К списку покупок»  
- Если товар уже добавлен в список, то при нажатии на кнопку необходимо перейти к экрану «Списка покупок»  
- Помимо кнопки экран должен отображать элементы управления для добавления или удаления дополнительного количества товара (+/-)

# 3 экран — Список покупок — Кнопка «поделиться выдачей»
- Отображается список товаров, добавленных на первом или втором экране  
- Для каждого айтема показывается картинка, цена, количество штук  
- Есть возможность купить несколько штук одного товара, удалить айтем товара, очистить список  
- Список покупок должен поддерживать персистентность — при перезапуске приложения список не очищается. Для хранения данных можно использовать любой удобный механизм  
- Должна быть функция «поделиться», которая позволяет отправить список покупок в виде текста в мессенджере или сохранить в «Заметки»  
- Стейт списка покупок должен быть синхронизирован с карточками айтемов и экраном выдачи  
- По клику на айтем должен происходить переход на карточку товара

## Необязательно (будет плюсом при выполнении):
- Добавить возможность менять порядок айтемов перетаскиванием 

## Подсказка:
- При реализации дизайна можно использовать любой сервис доставки в качестве референса